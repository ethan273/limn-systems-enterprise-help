# Quick Start

Get your first Limn Systems Enterprise API call working in 5 minutes.

## Prerequisites

- **Admin Access:** API keys can only be generated by administrators
- **Node.js 18+** (for TypeScript examples)
- **Basic understanding of tRPC** (or willingness to learn)

---

## Step 1: Generate API Key (Admin Only)

1. Log in to https://app.limn.us.com with admin credentials
2. Navigate to **Administration > Integrations > API Keys**
3. Click **"Generate New API Key"**
4. Fill form:
   - **Name:** "My First API Key" (descriptive name)
   - **Permissions:** Select required permissions (start with read-only)
   - **Rate Limit:** Use default (1,000 req/hour)
   - **Expires:** Optional expiration date
5. Click **"Generate Key"**
6. **Copy the API key immediately** (shown only once)
7. Store securely in environment variable or secret manager

**Result:**
```
limn_api_sk_1234567890abcdef1234567890abcdef
```

**Security Warning:**
- Never commit API keys to version control
- Never share API keys publicly
- Rotate keys quarterly
- Use separate keys for dev/staging/production

---

## Step 2: Install tRPC Client

```bash
# Install tRPC client library
npm install @trpc/client @trpc/server

# Install dependencies
npm install zod
```

---

## Step 3: Create API Client

Create a file `lib/api-client.ts`:

```typescript
import { createTRPCProxyClient, httpBatchLink } from '@trpc/client';
import type { AppRouter } from '@/server/api/root';

// Create tRPC client
export const api = createTRPCProxyClient<AppRouter>({
  links: [
    httpBatchLink({
      url: 'https://app.limn.us.com/api/trpc',

      // Add authentication header
      headers() {
        return {
          Authorization: `Bearer ${process.env.LIMN_API_KEY}`,
        };
      },
    }),
  ],
});
```

**Environment Variable:**
```bash
# .env.local
LIMN_API_KEY=limn_api_sk_1234567890abcdef1234567890abcdef
```

---

## Step 4: Make Your First API Call

Create a file `examples/list-orders.ts`:

```typescript
import { api } from '../lib/api-client';

async function listOrders() {
  try {
    // Fetch all pending orders
    const orders = await api.orders.list.query({
      status: 'pending',
      limit: 10,
    });

    console.log(`Found ${orders.length} pending orders:`);

    orders.forEach(order => {
      console.log(`- Order ${order.id}: ${order.customer.name} ($${order.total})`);
    });

  } catch (error) {
    console.error('API Error:', error);
  }
}

listOrders();
```

**Run:**
```bash
npx tsx examples/list-orders.ts
```

**Output:**
```
Found 5 pending orders:
- Order order_123: Acme Corp ($12,500)
- Order order_124: Example Inc ($8,300)
- Order order_125: Demo LLC ($15,700)
- Order order_126: Test Industries ($9,200)
- Order order_127: Sample Co ($11,400)
```

---

## Step 5: Try More Operations

### Fetch Single Order

```typescript
const order = await api.orders.getById.query({ id: "order_123" });

console.log("Order Details:");
console.log(`- Customer: ${order.customer.name}`);
console.log(`- Status: ${order.status}`);
console.log(`- Total: $${order.total}`);
console.log(`- Line Items: ${order.lineItems.length}`);
```

### Create New Task

```typescript
const task = await api.tasks.create.mutate({
  title: "Follow up with customer",
  description: "Discuss order timeline and shipping preferences",
  assigneeId: "user_456",
  priority: "high",
  dueDate: "2025-02-01",
});

console.log(`Task created: ${task.id}`);
```

### Update Inventory

```typescript
const product = await api.products.updateInventory.mutate({
  sku: "CHAIR-001-WAL",
  quantity: 25,
  reason: "Inventory restock from factory",
});

console.log(`Inventory updated: ${product.name} now has ${product.inventory_quantity} units`);
```

---

## Common Patterns

### Error Handling

```typescript
import { TRPCClientError } from '@trpc/client';

try {
  const order = await api.orders.getById.query({ id: "invalid_id" });
} catch (error) {
  if (error instanceof TRPCClientError) {
    console.error(`API Error: ${error.message}`);
    console.error(`Code: ${error.data?.code}`);
    console.error(`HTTP Status: ${error.data?.httpStatus}`);
  } else {
    console.error('Unexpected error:', error);
  }
}
```

### Batch Requests

```typescript
// Multiple requests batched into single HTTP call
const [orders, products, customers] = await Promise.all([
  api.orders.list.query({ status: 'pending' }),
  api.products.list.query({ category: 'chairs' }),
  api.customers.list.query({ active: true }),
]);
```

### Pagination

```typescript
// Fetch page 1 (first 50 orders)
const page1 = await api.orders.list.query({
  limit: 50,
  offset: 0,
});

// Fetch page 2 (next 50 orders)
const page2 = await api.orders.list.query({
  limit: 50,
  offset: 50,
});

// Fetch all orders (loop until no more results)
let allOrders = [];
let offset = 0;
const limit = 100;

while (true) {
  const batch = await api.orders.list.query({ limit, offset });
  allOrders.push(...batch);

  if (batch.length &lt; limit) break; // No more results
  offset += limit;
}
```

---

## Real-Time Subscriptions (WebSocket)

For real-time updates, use tRPC subscriptions:

```typescript
import { createWSClient, wsLink } from '@trpc/client';

// Create WebSocket client
const wsClient = createWSClient({
  url: 'wss://app.limn.us.com/api/trpc',

  // Authenticate
  connectionParams: async () => {
    return {
      token: process.env.LIMN_API_KEY,
    };
  },
});

// Create tRPC client with WebSocket link
export const api = createTRPCProxyClient<AppRouter>({
  links: [wsLink({ client: wsClient })],
});

// Subscribe to order status changes
const subscription = api.orders.watchStatus.subscribe(
  { orderId: "order_123" },
  {
    onData(order) {
      console.log(`Order ${order.id} status changed to: ${order.status}`);
    },
    onError(err) {
      console.error('Subscription error:', err);
    },
  }
);

// Unsubscribe when done
subscription.unsubscribe();
```

---

## TypeScript Types

tRPC provides automatic type inference:

```typescript
// Client knows exact return type
const order = await api.orders.getById.query({ id: "order_123" });
//    ^? const order: Order & { customer: Customer, lineItems: LineItem[] }

// Autocomplete for input parameters
await api.orders.list.query({
  status: "pending", // Autocomplete: "pending" | "in_production" | "shipped" | etc.
  limit: 10,         // Type: number
  offset: 0,         // Type: number
});

// Type-safe mutations
await api.tasks.create.mutate({
  title: "string",        // Type: string (required)
  description: "string",  // Type: string (optional)
  assigneeId: "string",   // Type: string (required)
  priority: "high",       // Type: "low" | "medium" | "high" | "urgent"
  dueDate: "2025-02-01",  // Type: string (ISO date format)
});
```

---

## Rate Limit Handling

```typescript
import { TRPCClientError } from '@trpc/client';

async function makeAPICall() {
  try {
    return await api.orders.list.query({ status: 'pending' });
  } catch (error) {
    if (error instanceof TRPCClientError && error.data?.code === 'TOO_MANY_REQUESTS') {
      const resetTime = error.data?.resetTime; // Unix timestamp
      const waitSeconds = resetTime - Math.floor(Date.now() / 1000);

      console.log(`Rate limit exceeded. Waiting ${waitSeconds} seconds...`);
      await new Promise(resolve => setTimeout(resolve, waitSeconds * 1000));

      // Retry
      return makeAPICall();
    }
    throw error;
  }
}
```

---

## Next Steps

1. **[Authentication](/api-reference/authentication)** - Learn about API keys, OAuth, session management
2. **[API Endpoints](/api-reference/endpoints)** - Browse all 90+ endpoints by module
3. **[Error Handling](/api-reference/errors)** - Handle errors gracefully
4. **[Rate Limits](/api-reference/rate-limits)** - Understand usage limits and best practices

---

## Example Projects

**Full-Stack TypeScript Example:**
```bash
git clone https://github.com/limn-systems/api-examples
cd api-examples/typescript-quickstart
npm install
npm run start
```

**Python Client Example:**
```bash
git clone https://github.com/limn-systems/api-examples
cd api-examples/python-client
pip install -r requirements.txt
python main.py
```

---

## Support

**Questions:**
- Email: api-support@limn.us.com
- Slack: #api-support (internal only)

**Issues:**
- Report bugs: support@limn.us.com
- Feature requests: feature-requests@limn.us.com

---

**Last Updated:** January 2025
